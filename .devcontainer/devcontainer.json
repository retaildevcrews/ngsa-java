{
  "name": "ngsa-java",
  // Using prebuilt image by default, uncomment build field below to use local Dockerfile instead
  "image": "ghcr.io/retaildevcrews/ngsa-java-codespaces",
  
  // Build based on local Dockerfile
  /*
  "build": {
     "dockerfile": "Dockerfile",
     "context": "..",
     "args": {
       "JAVA_VERSION": "11",
       "INSTALL_MAVEN": "true",
       "MAVEN_VERSION": "3.6.3",
       "INSTALL_AZURE_CLI": "true",
       "INSTALL_DOCKER": "true"
     }
   }, 
   */


  "mounts": [
    "source=/var/run/docker.sock,target=/var/run/docker.sock,type=bind"
  ],

  "settings": {
    "terminal.integrated.shell.linux": "/bin/bash",
    // "terminal.integrated.shell.linux": "/bin/zsh",
    "java.home": "/usr/lib/jvm/zulu11"
  },

  "remoteUser": "vscode",

  // Open port 8080 by default
  "forwardPorts": [8080],
  // Added for local developement
  // Without this port forwarding to Windows Network sometime fails
  "appPort": [8080],

  // Install extensions
  "extensions": [
    "vscjava.vscode-java-debug",
    "vscjava.vscode-java-dependency",
    "vscjava.vscode-java-pack",
    "vscjava.vscode-java-test",
    "redhat.java",
    "redhat.vscode-xml",
    "eamodio.gitlens",
    "davidanson.vscode-markdownlint",
    "gruntfuggly.todo-tree",
    "ms-azuretools.vscode-docker",
    "gabrielbb.vscode-lombok",
    "sonarsource.sonarlint-vscode",
    "visualstudioexptteam.vscodeintellicode",
    "vscjava.vscode-maven"
  ],

  // Run Bash script in .devcontainer directory
  "postCreateCommand": "/bin/bash ./.devcontainer/post-install.sh"
}
