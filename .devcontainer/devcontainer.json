{
  "name": "ngsa-java",
  "build": { "dockerfile": "Dockerfile" },
  "runArgs": ["--init", "--privileged"],
  "overrideCommand": false,

  // Set container specific settings
  "settings": {
    "terminal.integrated.defaultProfile.linux": "zsh",
    "java.home": "/usr/local/sdkman/candidates/java/current/",
    "java.jdt.ls.java.home": "/usr/local/sdkman/candidates/java/current/",
    "java.configuration.updateBuildConfiguration": "interactive",
    "java.completion.importOrder": ["", "javax", "java", "#"],
    "files.exclude": {
      "**/.classpath": true,
      "**/.project": true,
      "**/.settings": true,
      "**/.factorypath": true
    }
  },

  "remoteUser": "vscode",

  // Open port 8080 by default
  "forwardPorts": [8080],
  // Added for local developement
  // Without this port forwarding to Windows Network sometime fails
  "appPort": [8080],

  "features": {
    "ghcr.io/devcontainers/features/java:1": {
      "version": "19",
      "jdkDistro": "zulu",
      "installers": ["maven","jdk:zulu:19"],
      "mavenVersion": "3.8.1"
    }
  },

  // Install extensions
  "extensions": [
    "vscjava.vscode-java-debug",
    "vscjava.vscode-java-dependency",
    "vscjava.vscode-java-pack",
    "vscjava.vscode-java-test",
    "redhat.java",
    "redhat.vscode-xml",
    "eamodio.gitlens",
    "davidanson.vscode-markdownlint",
    "gruntfuggly.todo-tree",
    "ms-azuretools.vscode-docker",
    "gabrielbb.vscode-lombok",
    "sonarsource.sonarlint-vscode",
    "visualstudioexptteam.vscodeintellicode",
    "vscjava.vscode-maven"
  ],

  // Run Bash script in .devcontainer directory
  "onCreateCommand": "/bin/bash ./.devcontainer/on-create.sh"
}
